package module.bean;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.List;

import common.exception.SFException;
import common.sql.bean.SQLStruct;

public class AgtTranList {

	private String bankId;
	private boolean bankIdChanged;
	private String openBranch;
	private boolean openBranchChanged;
	private String tranFunc;
	private boolean tranFuncChanged;
	private String businessType;
	private boolean businessTypeChanged;
	private String tranType;
	private boolean tranTypeChanged;
	private String picsLogNo;
	private boolean picsLogNoChanged;
	private String frontLogNo;
	private String agentLogNo;
	private boolean agentLogNoChanged;
	private String acctNo;
	private boolean acctNoChanged;
	private String stkCode;
	private boolean stkCodeChanged;
	private String stkAcct;
	private boolean stkAcctChanged;
	private String bankAcct;
	private boolean bankAcctChanged;
	private String compAcct;
	private boolean compAcctChanged;
	private String ccyCode;
	private boolean ccyCodeChanged;
	private String tranAmount;
	private boolean tranAmountChanged;
	private String thirdTime;
	private boolean thirdTimeChanged;
	private String tradeDate;
	private boolean tradeDateChanged;
	private String hostDate;
	private boolean hostDateChanged;
	private String insertTime;
	private boolean insertTimeChanged;
	private String voidFlag;
	private boolean voidFlagChanged;
	private String tranResult;
	private boolean tranResultChanged;
	private String hostCheck;
	private boolean hostCheckChanged;
	private String chkResult;
	private boolean chkResultChanged;
	private String hostLogNo;
	private boolean hostLogNoChanged;
	private String voucherNo;
	private boolean voucherNoChanged;
	private String completeTime;
	private boolean completeTimeChanged;
	private String backLogNo;
	private boolean backLogNoChanged;
	private String backResult;
	private boolean backResultChanged;
	private String reserve;
	private boolean reserveChanged;
	private AgtCustomerInfo agtCustomerInfo = new AgtCustomerInfo();
	
	public AgtCustomerInfo getAgtCustomerInfo() {
		return agtCustomerInfo;
	}

	public void setAgtCustomerInfo(AgtCustomerInfo agtCustomerInfo) {
		this.agtCustomerInfo = agtCustomerInfo;
	}

	public String getAgentLogNo() {
		return agentLogNo;
	}

	public void setAgentLogNo(String agentLogNo) {
		this.agentLogNo = agentLogNo;
		this.agentLogNoChanged = true;
	}

	public String getBankId() {
		return bankId;
	}

	public void setBankId(String bankId) {
		this.bankId = bankId;
		this.bankIdChanged = true;
	}

	public String getOpenBranch() {
		return openBranch;
	}

	public void setOpenBranch(String openBranch) {
		this.openBranch = openBranch;
		this.openBranchChanged = true;
	}

	public String getTranFunc() {
		return tranFunc;
	}

	public void setTranFunc(String tranFunc) {
		this.tranFunc = tranFunc;
		this.tranFuncChanged = true;
	}

	public String getBusinessType() {
		return businessType;
	}

	public void setBusinessType(String businessType) {
		this.businessType = businessType;
		this.businessTypeChanged = true;
	}

	public String getTranType() {
		return tranType;
	}

	public void setTranType(String tranType) {
		this.tranType = tranType;
		this.tranTypeChanged = true;
	}

	public String getPicsLogNo() {
		return picsLogNo;
	}

	public void setPicsLogNo(String picsLogNo) {
		this.picsLogNo = picsLogNo;
		this.picsLogNoChanged = true;
	}

	public String getFrontLogNo() {
		return frontLogNo;
	}

	public void setFrontLogNo(String frontLogNo) {
		this.frontLogNo = frontLogNo;
	}

	public String getAcctNo() {
		return acctNo;
	}

	public void setAcctNo(String acctNo) {
		this.acctNo = acctNo;
		this.acctNoChanged = true;
	}

	public String getStkCode() {
		return stkCode;
	}

	public void setStkCode(String stkCode) {
		this.stkCode = stkCode;
		this.stkCodeChanged = true;
	}

	public String getStkAcct() {
		return stkAcct;
	}

	public void setStkAcct(String stkAcct) {
		this.stkAcct = stkAcct;
		this.stkAcctChanged = true;
	}

	public String getBankAcct() {
		return bankAcct;
	}

	public void setBankAcct(String bankAcct) {
		this.bankAcct = bankAcct;
		this.bankAcctChanged = true;
	}

	public String getCompAcct() {
		return compAcct;
	}

	public void setCompAcct(String compAcct) {
		this.compAcct = compAcct;
		this.compAcctChanged = true;
	}

	public String getCcyCode() {
		return ccyCode;
	}

	public void setCcyCode(String ccyCode) {
		this.ccyCode = ccyCode;
		this.ccyCodeChanged = true;
	}

	public String getTranAmount() {
		return tranAmount;
	}

	public void setTranAmount(String tranAmount) {
		this.tranAmount = tranAmount;
		this.tranAmountChanged = true;
	}

	public String getThirdTime() {
		return thirdTime;
	}

	public void setThirdTime(String thirdTime) {
		this.thirdTime = thirdTime;
		this.thirdTimeChanged = true;
	}

	public String getTradeDate() {
		return tradeDate;
	}

	public void setTradeDate(String tradeDate) {
		this.tradeDate = tradeDate;
		this.tradeDateChanged = true;
	}

	public String getHostDate() {
		return hostDate;
	}

	public void setHostDate(String hostDate) {
		this.hostDate = hostDate;
		this.hostDateChanged = true;
	}

	public String getInsertTime() {
		return insertTime;
	}

	public void setInsertTime(String insertTime) {
		this.insertTime = insertTime;
		this.insertTimeChanged = true;
	}

	public String getVoidFlag() {
		return voidFlag;
	}

	public void setVoidFlag(String voidFlag) {
		this.voidFlag = voidFlag;
		this.voidFlagChanged = true;
	}

	public String getTranResult() {
		return tranResult;
	}

	public void setTranResult(String tranResult) {
		this.tranResult = tranResult;
		this.tranResultChanged = true;
	}

	public String getHostCheck() {
		return hostCheck;
	}

	public void setHostCheck(String hostCheck) {
		this.hostCheck = hostCheck;
		this.hostCheckChanged = true;
	}

	public String getChkResult() {
		return chkResult;
	}

	public void setChkResult(String chkResult) {
		this.chkResult = chkResult;
		this.chkResultChanged = true;
	}

	public String getHostLogNo() {
		return hostLogNo;
	}

	public void setHostLogNo(String hostLogNo) {
		this.hostLogNo = hostLogNo;
		this.hostLogNoChanged = true;
	}

	public String getVoucherNo() {
		return voucherNo;
	}

	public void setVoucherNo(String voucherNo) {
		this.voucherNo = voucherNo;
		this.voucherNoChanged = true;
	}

	public String getCompleteTime() {
		return completeTime;
	}

	public void setCompleteTime(String completeTime) {
		this.completeTime = completeTime;
		this.completeTimeChanged = true;
	}

	public String getBackLogNo() {
		return backLogNo;
	}

	public void setBackLogNo(String backLogNo) {
		this.backLogNo = backLogNo;
		this.backLogNoChanged = true;
	}

	public String getBackResult() {
		return backResult;
	}

	public void setBackResult(String backResult) {
		this.backResult = backResult;
		this.backResultChanged = true;
	}

	public String getReserve() {
		return reserve;
	}

	public void setReserve(String reserve) {
		this.reserve = reserve;
		this.reserveChanged = true;
	}
	
	/**
	 * 将所有字段放入Object数组中
	 * @return
	 * @throws SFException
	 */
	private Object[] getFieldValues()throws SFException{
		Field[] fields = this.getClass().getDeclaredFields();
		List<Object> fieldValues = new ArrayList<Object>();
		try {
			for (Field f : fields) {
				if (f.getModifiers() > 2||f.get(this) instanceof Boolean || f.get(this) instanceof AgtCustomerInfo) {
					continue;
				}
				fieldValues.add(f.get(this));
			}
		} catch (Exception e) {
			// TODO: handle exception
			throw new SFException(e);
		}
		return fieldValues.toArray();
	}
	
	
	public SQLStruct  getSaveAgtAutoAgtSQLConstruct()throws SFException{
		StringBuffer sb=new StringBuffer();
		Object[] valueObj=getFieldValues();
		
		sb.append(" MERGE INTO AGT_TRANLIST T1");
		sb.append(" USING (select ? as BANKID,");
		sb.append("? as OPENBRANCH,? as TRANFUNC,? as BUSINESSTYPE,? as TRANTYPE,? as PICSLOGNO,? as FRONTLOGNO,? as AGENTLOGNO,");
		sb.append("? as ACCTNO,? as STKCODE,? as STKACCT,? as BANKACCT,? as COMPACCT,? as CCYCODE,? as TRANAMOUNT,? as THIRDTIME,");
		sb.append("? as TRADEDATE,? as HOSTDATE,? as INSERTTIME,? as VOIDFLAG,? as TRANRESULT,? as HOSTCHECK,? as CHKRESULT,");
		sb.append("? as HOSTLOGNO,? as VOUCHERNO,? as COMPLETETIME,? as BACKLOGNO,? as BACKRESULT,? as RESERVE");
		sb.append(" from dual) T2");
		sb.append(" ON (T1.FRONTLOGNO = T2.FRONTLOGNO)");
		sb.append(" WHEN MATCHED THEN");
		sb.append(" UPDATE SET");
		if(this.bankIdChanged){
			sb.append(" T1.BANKID = T2.BANKID,");

		}
		if(this.openBranchChanged){
			sb.append(" T1.OPENBRANCH = T2.OPENBRANCH,");

		}
		if(this.tranFuncChanged){
			sb.append(" T1.TRANFUNC = T2.TRANFUNC,");

		}
		if(this.businessTypeChanged){
			sb.append(" T1.BUSINESSTYPE = T2.BUSINESSTYPE,");

		}
		if(this.tranTypeChanged){
			sb.append(" T1.TRANTYPE = T2.TRANTYPE,");

		}
		if(this.picsLogNoChanged){
			sb.append(" T1.PICSLOGNO = T2.PICSLOGNO,");

		}
		if(this.agentLogNoChanged){
			sb.append(" T1.AGENTLOGNO = T2.AGENTLOGNO,");

		}
		if(this.acctNoChanged){
			sb.append(" T1.ACCTNO = T2.ACCTNO,");

		}
		if(this.stkCodeChanged){
			sb.append(" T1.STKCODE = T2.STKCODE,");

		}
		if(this.stkAcctChanged){
			sb.append(" T1.STKACCT = T2.STKACCT,");

		}
		if(this.bankAcctChanged){
			sb.append(" T1.BANKACCT = T2.BANKACCT,");

		}
		if(this.compAcctChanged){
			sb.append(" T1.COMPACCT = T2.COMPACCT,");

		}
		if(this.ccyCodeChanged){
			sb.append(" T1.CCYCODE = T2.CCYCODE,");

		}
		if(this.tranAmountChanged){
			sb.append(" T1.TRANAMOUNT = T2.TRANAMOUNT,");

		}
		if(this.thirdTimeChanged){
			sb.append(" T1.THIRDTIME = T2.THIRDTIME,");

		}
		if(this.tradeDateChanged){
			sb.append(" T1.TRADEDATE = T2.TRADEDATE,");

		}
		if(this.hostDateChanged){
			sb.append(" T1.HOSTDATE = T2.HOSTDATE,");

		}
		if(this.insertTimeChanged){
			sb.append(" T1.INSERTTIME = T2.INSERTTIME,");

		}
		if(this.voidFlagChanged){
			sb.append(" T1.VOIDFLAG = T2.VOIDFLAG,");

		}
		if(this.tranResultChanged){
			sb.append(" T1.TRANRESULT = T2.TRANRESULT,");

		}
		if(this.hostCheckChanged){
			sb.append(" T1.HOSTCHECK = T2.HOSTCHECK,");

		}
		if(this.chkResultChanged){
			sb.append(" T1.CHKRESULT = T2.CHKRESULT,");

		}
		if(this.hostLogNoChanged){
			sb.append(" T1.HOSTLOGNO = T2.HOSTLOGNO,");

		}
		if(this.voucherNoChanged){
			sb.append(" T1.VOUCHERNO = T2.VOUCHERNO,");

		}
		if(this.completeTimeChanged){
			sb.append(" T1.COMPLETETIME = T2.COMPLETETIME,");

		}
		if(this.backLogNoChanged){
			sb.append(" T1.BACKLOGNO = T2.BACKLOGNO,");

		}
		if(this.backResultChanged){
			sb.append(" T1.BACKRESULT = T2.BACKRESULT,");

		}
		if(this.reserveChanged){
			sb.append(" T1.RESERVE = T2.RESERVE,");

		}
		if(sb.substring(sb.length()-1).equals(",")){
			sb=sb.deleteCharAt(sb.length()-1);
		}
		sb.append(" WHEN NOT MATCHED THEN");
		sb.append("  insert");
		sb.append("(BANKID,OPENBRANCH,TRANFUNC,BUSINESSTYPE,TRANTYPE,PICSLOGNO,FRONTLOGNO,AGENTLOGNO,ACCTNO,STKCODE,");
		sb.append("STKACCT,BANKACCT,COMPACCT,CCYCODE,TRANAMOUNT,THIRDTIME,TRADEDATE,HOSTDATE,INSERTTIME,VOIDFLAG,");
		sb.append("TRANRESULT,HOSTCHECK,CHKRESULT,HOSTLOGNO,VOUCHERNO,COMPLETETIME,BACKLOGNO,BACKRESULT,RESERVE)");
		sb.append(" values");
		sb.append("(T2.BANKID,T2.OPENBRANCH,T2.TRANFUNC,T2.BUSINESSTYPE,T2.TRANTYPE,T2.PICSLOGNO,T2.FRONTLOGNO,T2.AGENTLOGNO,");
		sb.append("T2.ACCTNO,T2.STKCODE,T2.STKACCT,T2.BANKACCT,T2.COMPACCT,T2.CCYCODE,T2.TRANAMOUNT,T2.THIRDTIME,T2.TRADEDATE,");
		sb.append("T2.HOSTDATE,T2.INSERTTIME,T2.VOIDFLAG,T2.TRANRESULT,T2.HOSTCHECK,T2.CHKRESULT,T2.HOSTLOGNO,T2.VOUCHERNO,");
		sb.append("T2.COMPLETETIME,T2.BACKLOGNO,T2.BACKRESULT,T2.RESERVE)");
		return new SQLStruct(sb.toString(), valueObj);
	}
	
	/**
	 * 重置所有changed
	 */
	public void resetChangedFlag(){
		this.bankIdChanged=false;
		this.openBranchChanged=false;
		this.tranFuncChanged=false;
		this.businessTypeChanged=false;
		this.tranTypeChanged=false;
		this.picsLogNoChanged=false;
		this.agentLogNoChanged=false;
		this.acctNoChanged=false;
		this.stkCodeChanged=false;
		this.stkAcctChanged=false;
		this.bankAcctChanged=false;
		this.compAcctChanged=false;
		this.ccyCodeChanged=false;
		this.tranAmountChanged=false;
		this.thirdTimeChanged=false;
		this.tradeDateChanged=false;
		this.hostDateChanged=false;
		this.insertTimeChanged=false;
		this.voidFlagChanged=false;
		this.tranResultChanged=false;
		this.hostCheckChanged=false;
		this.chkResultChanged=false;
		this.hostLogNoChanged=false;
		this.voucherNoChanged=false;
		this.completeTimeChanged=false;
		this.backLogNoChanged=false;
		this.backResultChanged=false;
		this.reserveChanged=false;
	}
}
